{"version":3,"file":"index.js","mappings":"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","sources":["webpack://featured-professor/./src/index.scss","webpack://featured-professor/external window \"React\"","webpack://featured-professor/external window [\"wp\",\"apiFetch\"]","webpack://featured-professor/external window [\"wp\",\"data\"]","webpack://featured-professor/external window [\"wp\",\"element\"]","webpack://featured-professor/webpack/bootstrap","webpack://featured-professor/webpack/runtime/compat get default export","webpack://featured-professor/webpack/runtime/define property getters","webpack://featured-professor/webpack/runtime/hasOwnProperty shorthand","webpack://featured-professor/webpack/runtime/make namespace object","webpack://featured-professor/./src/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./index.scss\";\nimport { useSelect } from \"@wordpress/data\";\nimport { useState, useEffect } from \"react\";\nimport apiFetch from \"@wordpress/api-fetch\";\nconst __ = wp.i18n.__;\n\nwp.blocks.registerBlockType(\"ourplugin/featured-professor\", {\n\ttitle: \"Professor Callout\",\n\tdescription:\n\t\t\"Include a short description and link to a professor of your choice\",\n\ticon: \"welcome-learn-more\",\n\tcategory: \"common\",\n\tattributes: {\n\t\tprofId: { type: \"string\" },\n\t},\n\tedit: EditComponent,\n\tsave: function () {\n\t\treturn null;\n\t},\n});\n\nfunction EditComponent(props) {\n\tconst [thePreview, setThePreview] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tif (props.attributes.profId) {\n\t\t\tupdateTheMeta();\n\t\t\tasync function go() {\n\t\t\t\tconst response = await apiFetch({\n\t\t\t\t\tpath: `/featuredProfessor/v1/getHTML?profId=${props.attributes.profId}`,\n\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t});\n\t\t\t\tsetThePreview(response);\n\t\t\t}\n\t\t\tgo();\n\t\t} else {\n\t\t\tsetThePreview(\"\");\n\t\t}\n\t}, [props.attributes.profId]);\n\n\t// if the second arg is empty, React runs this the first time that this component renders.\n\t// But if you return something(called cleanup function), React will run it when this block gets deleted or unaccounted(no longer rendered to DOM)\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tupdateTheMeta();\n\t\t};\n\t}, []);\n\n\tfunction updateTheMeta() {\n\t\tconst profsForMeta = wp.data\n\t\t\t.select(\"core/block-editor\")\n\t\t\t.getBlocks()\n\t\t\t.filter((x) => x.name == \"ourplugin/featured-professor\")\n\t\t\t.map((x) => x.attributes.profId)\n\t\t\t.filter((x, index, arr) => {\n\t\t\t\treturn arr.indexOf(x) == index;\n\t\t\t});\n\t\tconsole.log(profsForMeta);\n\t\t// if it is registered in php && save button was pressed, the value will be saved.\n\t\twp.data\n\t\t\t.dispatch(\"core/editor\")\n\t\t\t.editPost({ meta: { featuredprofessor: profsForMeta } });\n\t}\n\n\t// instead of wp.data.select(\"core\").getEntityRecords(\"postType\",\"professor\",{per_page: -1})\n\t// useSelect run again whenever value changes\n\tconst allProfs = useSelect((select) => {\n\t\treturn select(\"core\").getEntityRecords(\"postType\", \"professor\", {\n\t\t\tper_page: -1,\n\t\t});\n\t});\n\n\tconsole.log(allProfs);\n\n\t// in Javascript when you are returning something in a function that stops the further execution(second return below)\n\tif (allProfs == undefined) return <p>Loading...</p>;\n\n\treturn (\n\t\t<div className=\"featured-professor-wrapper\">\n\t\t\t<div className=\"professor-select-container\">\n\t\t\t\t<select onChange={(e) => props.setAttributes({ profId: e.target.value })}>\n\t\t\t\t\t<option value=\"\">{__(\"Select a professor\", \"featured-professor\")}</option>\n\t\t\t\t\t{allProfs.map((prof) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option value={prof.id} selected={props.attributes.profId == prof.id}>\n\t\t\t\t\t\t\t\t{prof.title.rendered}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div dangerouslySetInnerHTML={{ __html: thePreview }}></div>\n\t\t</div>\n\t);\n}\n"],"names":["useSelect","useState","useEffect","apiFetch","__","wp","i18n","blocks","registerBlockType","title","description","icon","category","attributes","profId","type","edit","EditComponent","save","props","thePreview","setThePreview","updateTheMeta","go","response","path","method","profsForMeta","data","select","getBlocks","filter","x","name","map","index","arr","indexOf","console","log","dispatch","editPost","meta","featuredprofessor","allProfs","getEntityRecords","per_page","undefined","e","setAttributes","target","value","prof","id","rendered","__html"],"sourceRoot":""}